!function(t,e,n){"use strict";function i(t,e,n,i){this.left=Math.round(t),this.top=Math.round(e),this.width=Math.round(n),this.height=Math.round(i),this.right=this.left+this.width,this.bottom=this.top+this.height}function o(t){this.visibilityRate={both:0,horizontal:0,vertical:0},this.occupiedViewport={both:0,horizontal:0,vertical:0},this.maxVisibility={both:0,horizontal:0,vertical:0},this.element=t,this.onScreen=!1,this.frames={window:new i(0,0,0,0),viewport:new i(0,0,0,0),element:new i(0,0,0,0)}}var r=(Array.prototype.slice,{}),h={},s=0,c=function(){t.addEventListener("resize",a),t.addEventListener("scroll",a)},u=function(){t.removeEventListener("resize",a),t.removeEventListener("scroll",a)},a=function(){h={top:document.documentElement.clientTop,left:document.documentElement.clientLeft},r=new i(t.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,t.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,t.innerWidth,t.innerHeight)},l=function(t){var e=t.getBoundingClientRect(),n=e.top+r.top-h.top,o=e.left+r.left-h.left;return new i(o,n,e.width,e.height)},d=function(t,e,n){var i=v.BooleanIteratorMode.AND;n=n||v.BooleanIteratorMode.AND;for(var o=n===i?!0:!1,r=0,h=t.length;h>r;r++)n===i?o&=e(t[r]):o|=e(t[r]);return!!o},f=function(t){return t.length!==n},m=function(t){return!!r.intersectionWith(t)},g=function(e){return"string"==typeof e?document.querySelectorAll(e):t.jQuery&&e instanceof jQuery?jQuery.makeArray(e):f(e)?e:e.nodeType?[e]:null};i.prototype.getArea=function(){return this.width*this.height},i.prototype.subtractFrom=function(t){return new i(this.left-t.left,this.top-t.top,this.width,this.height)},i.prototype.intersectionWith=function(t){var e=Math.max(this.top,t.top),n=Math.max(this.left,t.left),o=Math.min(this.right,t.right),r=Math.min(this.bottom,t.bottom),h=o-n,s=r-e;return h>=0&&s>=0?new i(n,e,h,s):null};var v=function(){var e,i=this,h=[],d=!1,f=function(){e&&e.call(i,i.getState(h))};i.bind=function(n,i){s++||c(),"function"==typeof i?e=i:console.error("[Visc: Invalid Callback]"),h=g(n),d=!0,t.addEventListener("resize",f),t.addEventListener("scroll",f)},i.unbind=function(){i.__elements=[],d=!1,t.removeEventListener("resize",f),t.removeEventListener("scroll",f),--s||u()},i.getState=function(t){if(t===n)return null;h.length||(h=g(t)),d||a();for(var e=[],i=0;i<h.length;i++){var s=h[i],c=l(s),u=c.intersectionWith(r),f=c.getArea(),v=new o(s);if(u&&0!==c.width&&0!==c.height){var w=u.getArea(),p=Math.min(c.width,r.width),b=Math.min(c.height,r.height);v.frames={window:u,viewport:u.subtractFrom(r),element:u.subtractFrom(c)},v.visibilityRate={both:w/f,horizontal:u.width/c.width,vertical:u.height/c.height},v.occupiedViewport={both:w/r.getArea(),horizontal:u.width/r.width,vertical:u.height/r.height},v.maxVisibility={both:w/(p*b),horizontal:u.width/p,vertical:u.height/b}}v.onScreen=m(c),e.push(v)}return e},a()};v.BooleanIteratorMode={AND:0,OR:1},v.getNumberOfInstances=function(){return s},v.getState=function(t){return(new v).getState(t)},v.isVisible=function(t,e,n){return n&&e||(e=0),d(v.getState(g(t)),function(t){var n=t.maxVisibility.both;return n>0&&n>=e||1==n},n)},v.isOnScreen=function(t,e){return a(),d(g(t),function(t){return m(l(t))},e)},e&&(e.fn.visc=function(t){if("getState"===t)return v.getState(this);if("function"==typeof t||!t){var n=new v;return this.data("visc",n),n.bind(this,arguments[0]),this}e.error('Method "'+t+'"" does not exist on $.ViSC')},e.fn.unvisc=function(){return this.data("visc").unbind()}),t.Visc=v}(window,window.jQuery||window.Zepto||window.$);